<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Letter Grid</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    .word {
      font-size: 36px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, 50px);
      grid-template-rows: repeat(4, 50px);
      gap: 5px;
      margin-bottom: 20px;
    }

    .cell {
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      border-radius: 5px;
      transition: transform 0.2s ease-in-out;
    }

    .cell:hover {
      transform: scale(1.2);
    }

    .cell.disabled {
      cursor: not-allowed;
      pointer-events: none;
      opacity: 0.5;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="word"></div>
  <div class="grid"></div>
  <button onclick="startNewWord()">Start New Word</button>

  <script>
    const wordElement = document.querySelector('.word');
    const grid = document.querySelector('.grid');
    const cells = [];
    const selectedCells = [];
    let selectedColor = 'orange';
    let newWord = true;

    // Create grid cells
    function createGridCells() {
      grid.innerHTML = '';
      cells.length = 0;
      const alphabet = 'דימלכסיידיעאהבהגבתיז';

      for (let i = 0; i < 20; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.textContent = alphabet[i]
        cell.addEventListener('click', handleCellClick);
        grid.appendChild(cell);
        cells.push(cell);
      }
    }

    createGridCells();

    // Handle cell click
    function handleCellClick(event) {
      const cell = event.target;
      const index = cells.indexOf(cell);

      // Disable all cells
      if (selectedCells.length != 0) {
        cells.forEach(cell => cell.classList.add('disabled'));
      }

      // Enable adjacent cells
      enableAdjacentCells(index);

      // Toggle selected class
      cell.classList.remove('disabled');
      cell.classList.toggle('selected');

      // Update selected cells and word
      if (cell.classList.contains('selected')) {
        selectedCells.push(cell);
        cell.style.backgroundColor = selectedColor;
      } else {
        selectedCells.splice(selectedCells.indexOf(cell), 1);
        cell.style.backgroundColor = '';
      }
      updateWord();

    }
    
    // Enable adjacent cells
    function enableAdjacentCells(index) {
      const row = Math.floor(index / 5);
      const col = index % 5;
      let curr;
      
      // Left cell
      curr = cells[index - 1];
      if (col > 0 && !curr.classList.contains('selected')) curr.classList.remove('disabled');
      
      // Right cell
      curr = cells[index + 1];
      if (col < 4 && !curr.classList.contains('selected')) curr.classList.remove('disabled');
      
      // Top cell
      curr = cells[index - 5];
      if (row > 0 && !curr.classList.contains('selected')) curr.classList.remove('disabled');
      
      // Bottom cell
      curr = cells[index + 5];
      if (row < 3 && !curr.classList.contains('selected')) curr.classList.remove('disabled');
    }

    // Update word with selected letters
    function updateWord() {
      console.log(selectedCells); 
      word = '';//selectedCells.join('');
      for (let i = 0; i < selectedCells.length; i++) {
        
        word += selectedCells[i].textContent;
      }
      wordElement.textContent = word;
    }

    function isCellSelectable(index) {
      cells[index]
    }

    // Start new word
    function startNewWord() {
      console.log("Hello world!"); 
      selectedColor = getRandomColor();
      wordElement.textContent = ''; // Clear the word
      selectedCells.forEach(cell => {
        const index = cells.indexOf(cell);
        cells[index].style.backgroundColor = selectedColor;
      });

      newWord = true
      
    }

    // Get random color
    function getRandomColor() {
      const letters = '0123456789ABCDEF';
      let color = '#';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }
  </script>
</body>
</html>